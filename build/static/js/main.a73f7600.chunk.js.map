{"version":3,"sources":["components/Editor/small/ColorPicker.jsx","components/common/Link.jsx","components/Editor/Editor.jsx","components/Editor/Header.jsx","components/Editor/BadBrowser.jsx","components/Editor/ToolBar.jsx","components/Editor/Chart.jsx","components/Editor/sections/Export.jsx","components/Editor/sections/Info.jsx","components/Editor/small/Shapes.jsx","components/Editor/small/SuperLanes.jsx","components/Editor/small/SelectedElement.jsx","components/Editor/sections/Controls.jsx","components/Editor/small/Lanes.jsx","components/Editor/sections/Polyphasic.jsx","components/Intro/Intro.jsx","components/routes.jsx","components/App.jsx","index.js","server.js","components/common/Logo.jsx","history.js"],"names":["colors","red","blue","brown","green","gray","yellow","purple","pink","ColorPicker","props","state","panelOpen","dom","Object","keys","map","color","className","classNames","active","activeColor","key","onClick","bind","viewBox","cx","cy","r","fill","React","Component","e","aNewTab","metaKey","ctrlKey","anExternalLink","href","startsWith","preventDefault","history","push","style","this","children","App","slideSidebarMobile","setState","changeSection","i","currentSection","setGlobalNapchart","napchart","setMetaInfo","title","description","somethingUpdate","forceUpdate","loadingFinish","loading","save","chartid","server","data","err","_notify","addNotification","message","level","onSave","window","location","changeTitle","event","target","value","changeDescription","setNumberOfLanes","lanes","getAmpm","cookiePref","Cookies","get","eval","date","Date","UTC","dateString","toLocaleTimeString","match","toString","setAmpm","ampm","set","getInitialSection","includes","pathname","length","substring","url","origin","sections","element","text","ref","notificationSystem","c","section","onUpdate","onLoading","onLoadingFinish","editTitle","editingTitle","editTitleOff","focusField","input","focus","setSelectionRange","white","height","whiteBG","type","placeholder","onBlur","onChange","BadBrowser","name","display","changeColor","selectedElement","config","defaultColor","back","disabled","canIGoBack","forward","canIGoForward","Chart","handleResize","updateDimensions","callback","resizer","refs","width","clientWidth","clientHeight","id","uuid","v4","initializeChart","addEventListener","removeEventListener","blurClass","canvas","ctx","getContext","loadChart","Napchart","init","responsive","oncontextmenu","stopPropagation","metaInfo","userJustSaved","cleanUrl","split","replaceState","document","changeAmpm","console","log","ampmChanged","sendFeedback","tab","feedback","feedbacksend","afterfeedback","checked","shapeButtons","shape","classes","changeShape","duration","laneIndex","helpers","minutes","elements","reduce","lane","start","end","minutesToReadable","laneIndexes","index","laneConfig","getLaneConfig","toggleLockLane","locked","deleteLane","addLane","colorTag","tagObj","colorTags","find","t","tag","changeColorTag","selected","deleteElement","isTouchUser","forceFocusSelected","Controls","Lanes","laneButtons","disabledLane","button","napchartDontLoseFocus","clickLane","activeLaneConfig","Polyphasic","calculateDuration","schedule","changeSchedule","sleepLane","emptyLane","initAndAddElements","add","eol","setSelected","setLane","sampleSchedules","Logo","noInteraction","logoText","Link","src","poster","autoPlay","loop","muted","routes","path","component","Editor","params","matchURI","uri","toRegex","exec","create","undefined","resolve","context","route","error","result","Error","status","Router","currentPath","router","listen","render","getElementById","Parse","initialize","serverURL","extend","cb","Cloud","run","chartData","then","response","catch","hm","loadFinish","a","query","Query","equalTo","results","chart","axios","post","JSON","stringify","spinLoad","hasStartedSpinning","shouldIContinue","continueSpin","endSpin","startSpin","spin","easingEffects","easeInSine","linear","easeOutSine","fontSize","dark","drawFace","interaction","forEach","initialStart","initialEnd","easingEffect","animateFromDuration","animateToDuration","now","step","progress","Math","min","newElements","sizeAnimate","thisDuration","setElements","requestAnimationFrame","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","cos","PI","sin","easeInOutSine","easeInExpo","pow","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeInElastic","s","p","abs","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","createBrowserHistory"],"mappings":"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","file":"static/js/main.a73f7600.chunk.js","sourcesContent":["import React from 'react'\r\nimport classNames from 'classnames'\r\nvar colors = {\r\n  red: '#EA4335',\r\n  blue: '#4285F4',\r\n  brown: '#B15911',\r\n  green: '#34A853',\r\n  gray: '#949494',\r\n  yellow: '#FBBC05',\r\n  purple: '#730B73',\r\n  pink: '#ff94d4'\r\n}\r\n\r\nexport default class ColorPicker extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      panelOpen: false\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var colorsArray = Object.keys(colors)\r\n    var dom = colorsArray.map(color => (\r\n      <div className={classNames('color', 'napchartDontLoseFocus', {\r\n        active: color == this.props.activeColor\r\n      })} key={color} onClick={this.props.onClick.bind(null, color)}>\r\n        <svg viewBox=\"0 0 100 100\">\r\n          <circle cx=\"50\" cy=\"50\" r=\"40\" fill={colors[color]} />\r\n        </svg>\r\n      </div>\r\n    ))\r\n    return (\r\n      <div className=\"ColorPicker\">\r\n        {dom}\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react'\r\nimport history from '../../history'\r\n\r\nexport default class extends React.Component {\r\n\t\r\n  render () {\r\n    return (\r\n        <a style={this.props.style} className={this.props.className} \r\n          href={this.props.href} onClick={this.props.onClick || this.onClick}>\r\n            {this.props.children}\r\n        </a>\r\n    );\r\n  }\r\n\r\n  onClick = (e) => {\r\n      const aNewTab = e.metaKey || e.ctrlKey;\r\n      const anExternalLink = this.props.href.startsWith('http');\r\n\r\n      if (!aNewTab && !anExternalLink) {\r\n          e.preventDefault();\r\n          history.push(this.props.href);\r\n      }\r\n  };\r\n}","\r\nimport c from 'classnames'\r\n\r\nimport React from 'react'\r\n\r\nimport Header from './Header.jsx'\r\nimport BadBrowser from './BadBrowser.jsx'\r\nimport ToolBar from './ToolBar.jsx'\r\nimport Chart from './Chart.jsx'\r\nimport Link from '../common/Link.jsx'\r\n\r\nimport Export from './sections/Export.jsx'\r\nimport Info from './sections/Info.jsx'\r\nimport Polyphasic from './sections/Polyphasic.jsx'\r\nimport Controls from './sections/Controls.jsx'\r\n\r\nimport Cookies from 'js-cookie';\r\nimport NotificationSystem from 'react-notification-system'\r\n\r\nimport server from '../../server'\r\n\r\nexport default class App extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    var chartid = false;\r\n    if (window.location.pathname.length == 6) {\r\n      chartid = window.location.pathname.substring(1);\r\n    }\r\n    this.state = {\r\n      napchart: false, // until it is initialized\r\n      loading: false,\r\n      url: window.location.origin + \"/\",\r\n      chartid: chartid,\r\n      title: '',\r\n      description: '',\r\n      currentSection: this.getInitialSection(),\r\n      ampm: this.getAmpm()\r\n    }\r\n  }\r\n\r\n  render() {\r\n\r\n    var sections = [\r\n      {\r\n        element: <Controls\r\n          napchart={this.state.napchart}\r\n          description={this.state.description}\r\n          changeDescription={this.changeDescription}\r\n        />,\r\n        text: 'Chart',\r\n        title: 'Chart controls'\r\n      },\r\n      {\r\n        element: <Export\r\n          url={this.state.url}\r\n          chartid={this.state.chartid}\r\n        />,\r\n        text: 'Share',\r\n        title: 'Share and export'\r\n      },\r\n      {\r\n        element: <Polyphasic napchart={this.state.napchart} />,\r\n        text: 'Sleep',\r\n        title: 'Polyphasic Sleep'\r\n      },\r\n      {\r\n        element: <Info ampm={this.state.ampm} setAmpm={this.setAmpm} />,\r\n        text: 'About',\r\n        title: 'About'\r\n      }\r\n    ]\r\n\r\n\r\n    return (\r\n      <div className=\"Editor\">\r\n        <BadBrowser />  \r\n        <NotificationSystem ref={(notificationSystem) => this._notify = notificationSystem} />  \r\n        <div className={c(\"grid\", { slideSidebarMobile: this.state.slideSidebarMobile })}>\r\n          <div className=\"sidebar\">\r\n            <Header\r\n              title={this.state.title}\r\n              changeTitle={this.changeTitle}\r\n              chartid={this.state.chartid}\r\n              save={this.save}\r\n              loading={this.state.loading}\r\n            />\r\n\r\n\r\n            <div className=\"sidebarContent\">\r\n              <div className=\"sideLane\">\r\n                <div className=\"up\">\r\n                  {sections.map((section, i) =>\r\n                    <button onClick={this.changeSection.bind(null, i)} key={i}\r\n                      className={c(\"squareBtn\", { 'active': (i == this.state.currentSection) })}>\r\n                      {section.text}\r\n                    </button>\r\n                  )}\r\n                </div>\r\n                <div className=\"down\">\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"otherLane\">\r\n                <ToolBar napchart={this.state.napchart} title={sections[this.state.currentSection].title} />\r\n                <div className=\"currentInfo\">\r\n\r\n                  {sections[this.state.currentSection].element}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"main\">\r\n            <Chart\r\n              napchart={this.state.napchart}\r\n              onUpdate={this.somethingUpdate}\r\n              setMetaInfo={this.setMetaInfo}\r\n              setGlobalNapchart={this.setGlobalNapchart}\r\n              onLoading={this.loading} onLoadingFinish={this.loadingFinish}\r\n              ampm={this.state.ampm}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {this.state.slideSidebarMobile &&\r\n          <button className=\"button is-light is-large slider left\" onClick={this.slideSidebarMobile}>\r\n            ‚Üí\r\n          </button>\r\n        }\r\n        {!this.state.slideSidebarMobile &&\r\n          <button className=\"button is-light is-large slider right\" onClick={this.slideSidebarMobile}>\r\n            ‚Üê\r\n          </button>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  slideSidebarMobile = () => {\r\n    this.setState({\r\n      slideSidebarMobile: !this.state.slideSidebarMobile\r\n    })\r\n  }\r\n\r\n  changeSection = (i) => {\r\n    this.setState({\r\n      currentSection: i\r\n    })\r\n  }\r\n\r\n  setGlobalNapchart = (napchart) => {\r\n    this.setState({\r\n      napchart: napchart\r\n    })\r\n  }\r\n\r\n  setMetaInfo = (title, description) => {\r\n    this.setState({\r\n      title,\r\n      description\r\n    })\r\n  }\r\n\r\n  somethingUpdate = (napchart) => {\r\n    this.forceUpdate()\r\n  }\r\n\r\n  loadingFinish = () => {\r\n    this.setState({\r\n      loading: false\r\n    })\r\n  }\r\n\r\n  loading = () => {\r\n    this.setState({\r\n      loading: true\r\n    })\r\n  }\r\n\r\n  save = () => {\r\n    this.loading()\r\n    var firstTimeSave = !this.props.chartid\r\n    server.save(this.state.napchart.data, this.state.title,\r\n      this.state.description, (err, chartid) => {\r\n        this.loadingFinish()\r\n        if (err) {\r\n          this._notify.addNotification({\r\n            message: err,\r\n            level: 'error'\r\n          })\r\n        } else {\r\n          this.onSave(chartid)\r\n        }\r\n          \r\n      })\r\n  }\r\n\r\n  onSave = (chartid) => {\r\n    // refresh (feels better for the user)\r\n    window.location = '/' + chartid + '?s=1'\r\n  }\r\n\r\n  changeTitle = event => {\r\n    this.setState({\r\n      title: event.target.value\r\n    })\r\n  }\r\n\r\n  changeDescription = event => {\r\n    this.setState({\r\n      description: event.target.value\r\n    })\r\n  }\r\n\r\n  setNumberOfLanes = (lanes) => {\r\n    this.state.napchart.setNumberOfLanes(lanes)\r\n  }\r\n\r\n  getAmpm = () => {\r\n\r\n    const cookiePref = Cookies.get('preferAmpm')\r\n    if (cookiePref) {\r\n      return eval(cookiePref)\r\n    }\r\n\r\n    var date = new Date(Date.UTC(2012, 11, 12, 3, 0, 0));\r\n    var dateString = date.toLocaleTimeString();\r\n\r\n    //apparently toLocaleTimeString() has a bug in Chrome. toString() however returns 12/24 hour formats. If one of two contains AM/PM execute 12 hour coding.\r\n    if (dateString.match(/am|pm/i) || date.toString().match(/am|pm/i)) {\r\n      return true\r\n    }\r\n    else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  setAmpm = (ampm) => {\r\n    Cookies.set('preferAmpm', ampm)\r\n\r\n    this.setState({\r\n      ampm: ampm\r\n    })\r\n  }\r\n\r\n  getInitialSection = () => {\r\n    // should always return 0 except when s=1 found in url, because\r\n    // then the user just saved chart and we will show share section instead\r\n\r\n    if (window.location.toString().includes('s=1')) {\r\n      return 1\r\n    }\r\n\r\n    return 0\r\n  }\r\n}\r\n","\r\nimport React from 'react'\r\nimport Logo from '../common/Logo.jsx'\r\nimport c from 'classnames'\r\n\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      editingTitle: false,\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"Header level is-mobile\">\r\n        <div className=\"level-left\">\r\n          <a href=\"/app\">\r\n            <Logo className=\"cornerLogo level-item\" white height=\"45\" loading={this.props.loading} whiteBG />\r\n          </a>\r\n          <div className=\"meta level-item\">\r\n            <div className=\"chartTitle\">\r\n              {this.state.editingTitle &&\r\n                <input type='text' placeholder='Untitled'\r\n                  ref={this.focusField}\r\n                  onBlur={this.editTitleOff}\r\n                  onChange={this.props.changeTitle}\r\n                  value={this.props.title} />\r\n              }\r\n              {!this.state.editingTitle && this.props.chartid &&\r\n                <h1 onClick={this.editTitle}>\r\n                  {this.props.title || 'Untitled'}\r\n                </h1>\r\n              }\r\n              {!this.state.editingTitle && !this.props.chartid &&\r\n                <h1>\r\n                  Unsaved chart\r\n                </h1>\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"level-right\">\r\n\r\n          <a onClick={this.props.save} className={c(\"button is-light level-item\", {'is-loading': this.props.loading})}>Save</a>\r\n        </div>\r\n\r\n      </header>\r\n    )\r\n  }\r\n\r\n  editTitle = () => {\r\n    this.setState({\r\n      editingTitle: true\r\n    })\r\n  }\r\n\r\n  editTitleOff = () => {\r\n    this.setState({\r\n      editingTitle: false\r\n    })\r\n  }\r\n\r\n  focusField = (input) => {\r\n    if (!input) {\r\n      return\r\n    }\r\n    const length = input.value.length;\r\n    input.focus();\r\n    input.setSelectionRange(length, length);\r\n  }\r\n}\r\n","import React from 'react';\n\nconst BadBrowser = ({ name }) => (\n    <section style={{display:'none'}} className=\"BadBrowser hero is-medium is-warning\">\n        <div className=\"hero-body\">\n            <div className=\"container has-text-centered\">\n                <h1 className=\"title\">We're sorry...</h1>\n                <h2 className=\"subtitle\">But your browser is too old to display Naphcart properly</h2>\n                <h2 className=\"subtitle\"><a href=\"http://outdatedbrowser.com/\" className=\"button\">Update your browser</a></h2>\n            </div>\n        </div>\n    </section> \n);\n\nexport default BadBrowser","\r\nimport React from 'react'\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var { napchart } = this.props\r\n    if (!napchart) {\r\n      return null\r\n    }\r\n\r\n    return (\r\n      <div className=\"ToolBar\">\r\n        <div className=\"level is-mobile\">\r\n          <div className=\"level-left\">\r\n          </div>\r\n          <div className=\"level-center\">\r\n            <div className=\"level-item\">\r\n              <h2 className=\"subtitle is-6 has-text-grey\">{this.props.title}</h2>\r\n            </div>\r\n          </div>\r\n          <div className=\"level-right\">\r\n            <div className=\"level-item\">\r\n              <button\r\n                onClick={napchart.history.back.bind(napchart)}\r\n                className=\"button is-dark is-outlined is-small\"\r\n                disabled={!napchart.history.canIGoBack()}\r\n                title={\"Undo \" + napchart.history.canIGoBack()}\r\n              >Undo</button>\r\n            </div>\r\n            <div className=\"level-item\">\r\n              <button\r\n                onClick={napchart.history.forward.bind(napchart)}\r\n                className=\"button is-dark is-outlined is-small\"\r\n                disabled={!napchart.history.canIGoForward()}\r\n                title={\"Redo \" + napchart.history.canIGoForward()}>Redo</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  changeColor = (color) => {\r\n    var napchart = this.props.napchart\r\n    napchart.changeColor(this.props.napchart.selectedElement, color)\r\n    napchart.config.defaultColor = color\r\n    this.forceUpdate()\r\n  }\r\n}\r\n","import React from 'react'\r\nimport uuid from 'uuid'\r\nimport Napchart from 'napchart'\r\n\r\nimport server from '../../server'\r\n\r\nexport default class Chart extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      id: uuid.v4()\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    var resizer = this.refs.resizer\r\n\r\n    this.updateDimensions(() =>\r\n      this.initializeChart()\r\n    )\r\n\r\n    window.addEventListener(\"resize\", this.handleResize);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.handleResize)\r\n  }\r\n\r\n  componentWillUpdate() {\r\n    return false\r\n  }\r\n\r\n  render() {\r\n    var blurClass = ''\r\n    if (this.props.loading) {\r\n      blurClass = 'blur'\r\n    }\r\n    return (\r\n      <div className=\"Chart\" ref=\"resizer\">\r\n        <canvas className={\"canvas \" + blurClass} width={this.state.width} height={this.state.height} ref={this.state.id}>\r\n          A chart\r\n        </canvas>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  handleResize = () => {\r\n    this.updateDimensions(() =>\r\n      this.props.napchart.updateDimensions()\r\n    )\r\n  }\r\n\r\n  updateDimensions = (callback) => {\r\n    var resizer = this.refs.resizer\r\n    this.setState({\r\n      width: resizer.clientWidth,\r\n      height: resizer.clientHeight,\r\n    }, callback)\r\n  }\r\n\r\n  initializeChart() {\r\n    var canvas = this.refs[this.state.id]\r\n    var ctx = canvas.getContext('2d')\r\n\r\n    // first check if we should fetch some data\r\n    server.loadChart(this.props.onLoading, this.props.onLoadingFinish, (data) => {\r\n      // returns {} if no data was loaded (you are on base napchart.com/)\r\n      // returns the data if you are on napchart.com/xxxxx\r\n      var napchart = Napchart.init(ctx, data, {\r\n        responsive: true,\r\n        ampm: this.props.ampm\r\n      })\r\n\r\n      napchart.onUpdate = () => {\r\n        this.props.onUpdate()\r\n      }\r\n\r\n      // for debugging\r\n      window.napchart = napchart\r\n\r\n      canvas.oncontextmenu = function (event) {\r\n        event.preventDefault()\r\n        event.stopPropagation()\r\n        return false\r\n      }\r\n\r\n      this.props.setGlobalNapchart(napchart)\r\n      this.props.setMetaInfo(data.metaInfo.title,data.metaInfo.description)\r\n    })\r\n  }\r\n}\r\n","\r\nimport React from 'react'\r\n\r\nexport default class extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Export\">\r\n\r\n        {!this.props.chartid &&\r\n          <div>Save your Napchart to share it</div>\r\n        }\r\n        {this.props.chartid &&\r\n          <div>\r\n            <div className=\"field\">\r\n              <label className=\"label\">URL</label>\r\n              <div className=\"control\">\r\n                <input onChange={() => { }} ref={this.userJustSaved} className=\"input\" type=\"text\" value={this.props.url + this.props.chartid} />\r\n              </div>\r\n            </div>\r\n            <div className=\"field\">\r\n              <label className=\"label\">IMAGE</label>\r\n              <div className=\"control\">\r\n                <a href={'http://thumb.napchart.com:1771/api/getImage?width=600&height=600&chartid=' + this.props.chartid}\r\n                >Image link (600x600)</a>\r\n              </div>\r\n            </div>\r\n            <div className=\"field\">\r\n              <label className=\"label\">EMBED</label>\r\n              <div className=\"control\">\r\n                Embed is possible with the <a target=\"_blank\" href=\"https://github.com/larskarbo/napchart\">napchart library</a>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label\">CSV</label>\r\n              <div className=\"control\">\r\n                {/* <a onClick={() => { csvExport() }} className=\"button\">Download csv</a> */}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  userJustSaved = (input) => {\r\n\r\n    const url = window.location.toString()\r\n    if (url.includes('s=1')) {\r\n      input.focus()\r\n      input.setSelectionRange(input.value.length, input.value.length)\r\n\r\n      // remove tag from url\r\n      const cleanUrl = url.split(\"?\")[0].split(\"#\")[0];\r\n      window.history.replaceState({}, document.title, cleanUrl)\r\n\r\n      return true\r\n    }\r\n  }\r\n}\r\n","\r\nimport React from 'react'\r\nimport server from '../../../server'\r\n\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      ampmChanged: false\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='Info'>\r\n        <div className=\"part\">\r\n          <div className=\"field\">\r\n            <p>Napchart is a time planning tool that helps you visualize time around a 24 hour clock.</p>\r\n          </div>\r\n\r\n          <div className=\"field\">\r\n            <p><strong>Create element:</strong> Click on an empty space on the chart and drag</p>\r\n          </div>\r\n          <div className=\"field\">\r\n            <p><strong>Delete element:</strong> Set duration to zero or press <kbd>delete</kbd> or <kbd>‚åò-‚å´</kbd></p>\r\n          </div>\r\n        </div>\r\n        <div className=\"part\">\r\n          <h2 className=\"title is-6\">Feedback</h2>\r\n          <p className=\"field\">Issues, ideas, or other feedback appreciated üòè</p>\r\n          <textarea className=\"textarea field\" ref=\"feedback\"></textarea>\r\n          <div className=\"field\" style={{ display: 'none' }} ref=\"afterfeedback\">\r\n            <p>Thank you for your feedback ‚ù§Ô∏èü§ó</p>\r\n          </div>\r\n          <button ref=\"feedbacksend\" onClick={this.sendFeedback} className=\"button block\">Send</button>\r\n        </div>\r\n        <div className=\"part\">\r\n          <h2 className=\"title is-6\">Contribute</h2>\r\n          <p className=\"field\">Napchart is open-source and hackable. Check out the projects on GitHub üåü</p>\r\n          <p className=\"field\"><a target=\"_blank\" href=\"https://github.com/larskarbo/napchart-website\"><strong>napchart-website</strong></a> on GitHub</p>\r\n          <p className=\"field\"><a target=\"_blank\" href=\"https://github.com/larskarbo/napchart\"><strong>napchart</strong></a> on GitHub</p>\r\n        </div>\r\n        <div className=\"part\">\r\n          <label className=\"label\">Time format</label>\r\n          <div className=\"control\">\r\n            <label className=\"radio\">\r\n              <input type=\"radio\" name=\"answer\" onChange={this.changeAmpm.bind(null, true)} checked={this.props.ampm} />\r\n              <span> AM/PM</span>\r\n            </label>\r\n            <label className=\"radio\">\r\n              <input type=\"radio\" name=\"answer\" onChange={this.changeAmpm.bind(null, false)} checked={!this.props.ampm} />\r\n              <span> 24 hours</span>\r\n            </label>\r\n            {this.state.ampmChanged &&\r\n              <p>Refresh to update</p>  \r\n            }\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  changeAmpm = (ampm) => {\r\n    console.log(ampm)\r\n    this.props.setAmpm(ampm)\r\n    this.setState({\r\n      ampmChanged: true\r\n    })\r\n  }\r\n\r\n  sendFeedback = (tab) => {\r\n    var value = this.refs.feedback.value\r\n\r\n\r\n    server.sendFeedback(value, function () {\r\n      console.log('feedback sent')\r\n    })\r\n\r\n    this.refs.feedback.style.display = 'none'\r\n    this.refs.feedbacksend.style.display = 'none'\r\n    this.refs.afterfeedback.style.display = 'block'\r\n\r\n  }\r\n}\r\n","import React from 'react'\r\nimport c from 'classnames'\r\n\r\n\r\nexport default class Chart extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n\r\n  render() {\r\n    var napchart = this.props.napchart\r\n    if (!napchart) {\r\n      return null\r\n    }\r\n    var shapes = ['circle', 'wide', 'line']\r\n\r\n    var shapeButtons = shapes.map(shape => {\r\n      var classes = {\r\n        'is-active': napchart.data.shape == shape,\r\n        'is-primary': napchart.data.shape == shape\r\n      }\r\n      return (\r\n        <p className=\"control\" key={shape}>\r\n          <button className={c(\"button\", \"is-small\", \"napchartDontLoseFocus\", classes)}\r\n            onClick={napchart.changeShape.bind(napchart, shape)}\r\n          >\r\n            {shape}\r\n          </button>\r\n        </p>\r\n      )\r\n    })\r\n    return (\r\n      <div className=\"field has-addons level is-mobile\">\r\n        <div className=\"level-left\">\r\n          <div className=\"level-item title is-6\">\r\n            Shape:\r\n          </div>\r\n          <div className=\"level-item\">\r\n            {shapeButtons}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport c from 'classnames'\r\n\r\nexport default class extends React.Component {\r\n  render() {\r\n    var napchart = this.props.napchart\r\n    if (!napchart) {\r\n      return null\r\n    }\r\n    // generate array with laneIndexes: [0,1,2,3,4]\r\n    var laneIndexes = []\r\n    for (let i = 0; i < napchart.data.lanes; i++) {\r\n      laneIndexes.push(i)\r\n    }\r\n    var lanes = laneIndexes.map((index) => {\r\n      var laneConfig = napchart.getLaneConfig(index)\r\n      return (\r\n        <div className=\"field domLane fullWidth\" key={index}>\r\n          <div className=\"level is-mobile\">\r\n            <div className=\"level-left\">\r\n              <p>{index + 1}\t‚ÄÉ{this.duration(index)}</p>\r\n            </div>\r\n            <div className=\"level-right\">\r\n              <div className=\"level-item\">\r\n                <button\r\n                  onClick={napchart.toggleLockLane.bind(napchart, index)}\r\n                  className={c(\"button is-small\", { 'is-active': laneConfig.locked, 'is-dark': laneConfig.locked })}>Lock</button>\r\n              </div>\r\n              <div className=\"level-item\">\r\n                <button onClick={napchart.deleteLane.bind(napchart, index)}\r\n                  className=\"button is-small\"\r\n                  disabled={napchart.data.lanes == 1}>Delete</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    })\r\n    return (\r\n      <div className=\"field SuperLanes\">\r\n        <p className=\"field title is-6\">Lanes:</p>\r\n        <div className=\"field\">\r\n          {lanes}\r\n        </div>\r\n        <button onClick={napchart.addLane.bind(napchart)}\r\n          className=\"button is-small\">Add lane +</button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  duration = (laneIndex) => {\r\n    const helpers = this.props.napchart.helpers\r\n    const minutes = this.props.napchart.data.elements.reduce((minutes, element) => {\r\n      if (element.lane == laneIndex) {\r\n        return minutes + helpers.duration(element.start, element.end)\r\n      } else {\r\n        return minutes\r\n      }\r\n    }, 0)\r\n    return helpers.minutesToReadable(minutes)\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ColorPicker from './ColorPicker.jsx'\r\n\r\nexport default class extends React.Component {\r\n  render() {\r\n    var napchart = this.props.napchart\r\n    var selected = napchart.selectedElement\r\n\r\n    if (napchart) {\r\n      var element = napchart.data.elements.find(e => e.id == selected)\r\n      var activeColor = (typeof element == 'undefined') ? napchart.config.defaultColor : element.color\r\n\r\n\r\n      return (\r\n        <div className=\"SelectedElement\">\r\n          <div className=\"field\">\r\n            <ColorPicker\r\n              onClick={this.changeColor}\r\n              activeColor={activeColor}\r\n            />\r\n          </div>\r\n          <div className=\"field\">\r\n            <input style={{ color: activeColor }} className=\"colorTag\" type='text' placeholder={activeColor + ' ='}\r\n              onChange={this.changeColorTag}\r\n              value={this.colorTag(activeColor)}\r\n            />\r\n          </div>\r\n\r\n          {selected &&\r\n            <div>\r\n              <div className=\"field has-addons level is-mobile\">\r\n                <div className=\"level-left\">\r\n                  <div className=\"level-item\">\r\n                    Selected element:\r\n                  </div>\r\n                  <div className=\"level-item\">\r\n                    <button onClick={napchart.deleteElement.bind(napchart, selected)} className=\"napchartDontLoseFocus button\">Delete</button>\r\n                    {napchart.isTouchUser &&\r\n                      <button onClick={napchart.forceFocusSelected} className=\"napchartDontLoseFocus button\">Edit text</button>\r\n                    }\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n\r\n\r\n            </div>\r\n          }\r\n        </div>\r\n      )\r\n\r\n\r\n    } else {\r\n      return null\r\n    }\r\n  }\r\n\r\n  colorTag = (color) => {\r\n    var napchart = this.props.napchart\r\n    var tagObj = napchart.data.colorTags.find(t => t.color == color)\r\n\r\n    if (typeof tagObj == 'undefined') {\r\n      return ''\r\n    } else {\r\n      return tagObj.tag\r\n    }\r\n  }\r\n\r\n  changeColor = (color) => {\r\n    var napchart = this.props.napchart\r\n    napchart.changeColor(this.props.napchart.selectedElement, color)\r\n    napchart.config.defaultColor = color\r\n    this.forceUpdate()\r\n  }\r\n\r\n  changeColorTag = (e) => {\r\n    var napchart = this.props.napchart\r\n    var activeColor = napchart.config.defaultColor\r\n\r\n    napchart.colorTag(activeColor, e.target.value)\r\n    this.forceUpdate()\r\n  }\r\n}","import React, { Component } from 'react'\n\nimport Shapes from '../small/Shapes.jsx'\nimport SuperLanes from '../small/SuperLanes.jsx'\nimport SelectedElement from '../small/SelectedElement.jsx'\n\nexport default class Controls extends Component {\n  render() {\n    var { napchart } = this.props\n    if (!napchart) {\n      return null\n    }\n    return (\n      <div>\n        <div>\n          <div>\n            <div className=\"part fullWidth\">\n              {/* <div className=\"field title is-6\">\n                Description:\n              </div> */}\n              <textarea type='text' className=\"description\" placeholder='Describe this chart'\n                onChange={this.props.changeDescription}\n                value={this.props.description} />\n            </div>\n            <div className=\"part\">\n              <Shapes napchart={napchart} />\n            </div>\n            <div className=\"part\">\n              <SuperLanes\n                napchart={napchart}\n              />\n            </div>\n            <div className=\"part\">\n              <div className=\"field title is-6\">\n                Color:\n              </div>\n              <SelectedElement napchart={napchart} />\n            </div>\n\n          </div>\n\n        </div>\n      </div>\n    )\n  }\n};\n","import React from 'react'\r\nimport c from 'classnames'\r\n\r\nexport default class Lanes extends React.Component {\r\n  render() {\r\n    var napchart = this.props.napchart\r\n    if (!napchart) {\r\n      return null\r\n    }\r\n    // generate array with laneIndexes: [0,1,2,3,4]\r\n    var laneIndexes = []\r\n    for (let i = 0; i < napchart.data.lanes; i++) {\r\n      laneIndexes.push(i)\r\n    }\r\n    var laneButtons = laneIndexes.map((index) => {\r\n      var disabled = this.props.disabledLane(index)\r\n      var classes = {\r\n        button: true,\r\n        'is-active': index == this.props.active,\r\n        'is-dark': index == this.props.active,\r\n        disabled: disabled,\r\n        napchartDontLoseFocus: true\r\n      }\r\n      return (\r\n        <p className=\"control\" key={index}>\r\n          <button className={c(classes)}\r\n            onClick={!disabled && this.props.clickLane.bind('', index)}\r\n            disabled={disabled}\r\n          >\r\n            {index + 1}\r\n          </button>\r\n        </p>\r\n      )\r\n    })\r\n\r\n    const activeLaneConfig = napchart.getLaneConfig(this.props.active);\r\n    return (\r\n      <div className=\"field has-addons level is-mobile\" >\r\n        <div className=\"level-left\">\r\n          <div className=\"level-item\">\r\n            Lane:\r\n          </div>\r\n          <div className=\"level-item\">\r\n            {laneButtons}\r\n          </div>\r\n          <div className=\"level-item\">\r\n            <button\r\n              onClick={napchart.toggleLockLane.bind(napchart, this.props.active)}\r\n              className={c(\"button is-small\", { 'is-active': activeLaneConfig.locked, 'is-dark': activeLaneConfig.locked })}>Lock</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport sampleSchedules from './polyphasic/sampleSchedules.json'\r\nimport ColorPicker from '../small/ColorPicker.jsx'\r\nimport Lanes from '../small/Lanes.jsx'\r\n\r\n\r\nexport default class Polyphasic extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      sleepLane: 0,\r\n      color: 'red'\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Polyphasic\">\r\n        <div className=\"field\">Clicking on any of the schedules will overwrite all elements in the selected lane</div>\r\n        <div className=\"field\">\r\n          <Lanes\r\n            napchart={this.props.napchart}\r\n            clickLane={this.setLane}\r\n            active={this.state.sleepLane}\r\n            disabledLane={(lane) => lane > this.props.napchart.data.lanes}\r\n          />\r\n        </div>\r\n        <div className=\"field\">\r\n          <ColorPicker\r\n            onClick={this.changeColor}\r\n            activeColor={this.state.color}\r\n          />\r\n        </div>\r\n        <div className=\"panel field\">\r\n          <p className=\"panel-heading\">\r\n            Schedules\r\n          </p>\r\n          {/* <div className=\"panel-block\">\r\n            <p className=\"control has-icons-left\">\r\n              <input className=\"input is-small\" type=\"text\" placeholder=\"search\" />\r\n              <span className=\"icon is-small is-left\">\r\n                <i className=\"fas fa-search\"></i>\r\n              </span>\r\n            </p>\r\n          </div> */}\r\n          {/* <p className=\"panel-tabs\">\r\n            <a className=\"is-active\">all</a>\r\n            <a>public</a>\r\n            <a>private</a>\r\n            <a>sources</a>\r\n            <a>forks</a>\r\n          </p> */}\r\n\r\n\r\n          {sampleSchedules.map(schedule => (\r\n            <a key={schedule.name} className=\"panel-block\"\r\n              onClick={this.changeSchedule.bind(null, schedule)}>\r\n              <div className=\"level is-mobile schedule\">\r\n                <div className=\"level-left\">\r\n                  <div className=\"level-item\">\r\n                    <span>{schedule.name}</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"level-right\">\r\n                  <div className=\"level-item\">\r\n                    <span className=\"duration\">{this.calculateDuration(schedule)}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </a>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  calculateDuration = (schedule) => {\r\n    var helpers = this.props.napchart.helpers\r\n    const minutes = schedule.elements.reduce((minutes, element) => {\r\n      return minutes + helpers.duration(element.start, element.end)\r\n    }, 0)\r\n    return helpers.minutesToReadable(minutes)\r\n  }\r\n\r\n  changeSchedule = (schedule) => {\r\n    var lane = this.state.sleepLane // because napchart counts from 0, 1, 2 ...\r\n    var elements = schedule.elements.map(element => {\r\n      return {\r\n        start: element.start,\r\n        end: element.end,\r\n        lane: lane,\r\n        color: this.state.color\r\n      }\r\n    })\r\n    var napchart = this.props.napchart\r\n    napchart.emptyLane(lane)\r\n    napchart.initAndAddElements(elements)\r\n    napchart.history.add('Use polyphasic schedule')\r\n\r\n    // find a element on the lane and select it\r\n    var eol = napchart.data.elements.find(e => e.lane == lane)\r\n    napchart.setSelected(eol.id)\r\n  }\r\n\r\n  setLane = (lane) => {\r\n    this.setState({\r\n      sleepLane: lane\r\n    })\r\n  }\r\n\r\n  changeColor = (color) => {\r\n    this.setState({\r\n      color: color\r\n    })\r\n  }\r\n\r\n}","\r\nimport classNames from 'classnames'\r\n\r\nimport React from 'react'\r\n\r\nimport Logo from '../common/Logo.jsx'\r\nimport Link from '../common/Link.jsx'\r\n\r\nexport default class extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <section className=\"section hero is-dark is-bold is-fullheight\">\r\n          <div className=\"hero-body\">\r\n            <div className=\"column has-text-centered\">\r\n              <div className=\"bigLogo\">\r\n                <Logo noInteraction logoText=\"Napchart\" height=\"150\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"hero-foot\">\r\n            <Link href=\"/app\">\r\n              <Logo white noInteraction logoText=\"GO TO APP\" height=\"45\" />\r\n            </Link>\r\n\r\n          </div>\r\n        </section>\r\n\r\n\r\n        <section className=\"section hero is-light\">\r\n          <div className=\"hero-body\">\r\n            <div className=\"container\">\r\n              <div className=\"columns\">\r\n                <div className=\"column has-text-centered\">\r\n                  <h1 className=\"title is-3\">Visualize complex time schedules</h1>\r\n\r\n                  <video src=\"/chartvideo.mp4\" poster=\"/chartvideothumb.png\" autoPlay loop muted>\r\n                  </video>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"section hero is-warning\">\r\n          <div className=\"hero-body\">\r\n            <div className=\"container\">\r\n              <div className=\"columns\">\r\n                <div className=\"column has-text-centered vertical-align-center\">\r\n                  <h2 className=\"title is-4\">Ultimate sharing experience</h2>\r\n                  <p>Save a chart with one click, and share the unique link with the world.</p>\r\n                </div>\r\n                <div className=\"column has-text-centered\">\r\n                  <img src=\"/save.png\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"section hero is-light\">\r\n          <div className=\"hero-body\">\r\n            <div className=\"container\">\r\n              <div className=\"columns rtl\">\r\n                <div className=\"column has-text-centered vertical-align-center\">\r\n                  <h2 className=\"title is-2\">Experiment with polyphasic sleep</h2>\r\n                  <p>Napchart has over 20 polyphasic sleep presets and is often\r\n                used by the community to share, discuss and plan schedules</p>\r\n                </div>\r\n                <div className=\"column has-text-centered\">\r\n                  <img src=\"/polyphasic.png\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n\r\n        <section className=\"section hero is-dark\">\r\n          <div className=\"hero-body\">\r\n            <div className=\"container has-text-centered\">\r\n              <a href=\"/app\" className=\"button\">\r\n                <Logo whiteBG noInteraction logoText=\"GO TO APP\" height=\"45\" />\r\n              </a>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"hero-foot\">\r\n            <div className=\"container has-text-centered\">\r\n              <p><a target=\"_blank\" href=\"fjdi\"><strong>napchart-website</strong></a> on GitHub</p>\r\n              <p><a target=\"_blank\" href=\"fjdi\"><strong>napchart</strong></a> on GitHub</p>\r\n              <p>üåü Copyright 2013-2018 Lars Karbo üåü</p>\r\n\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import toRegex from 'path-to-regexp';\r\n\r\nimport React from 'react';\r\n\r\nimport Editor from './Editor/Editor.jsx'\r\nimport Intro from './Intro/Intro.jsx'\r\n\r\nconst routes = [\r\n\t{\r\n\t\tpath: '/',\r\n\tcomponent: () => <Intro />\r\n\t},\r\n\t{\r\n\t\tpath: '/app',\r\n\t\tcomponent: () => <Editor />\r\n\t},\r\n\t{\r\n\t\tpath: '/:chartid',\r\n\t\tcomponent: (params) => <Editor chartid={\"hey\"} />\r\n\t},\r\n]\r\n\r\nfunction matchURI(path, uri) {\r\n\tconst keys = [];\r\n\tconst pattern = toRegex(path, keys); // TODO: Use caching\r\n\tconst match = pattern.exec(uri);\r\n\tif (!match) return null;\r\n\tconst params = Object.create(null);\r\n\tfor (let i = 1; i < match.length; i++) {\r\n\t\tparams[keys[i - 1].name] =\r\n\t\t\tmatch[i] !== undefined ? match[i] : undefined;\r\n\t}\r\n\treturn params;\r\n}\r\n\r\nfunction resolve(context) {\r\n\tfor (const route of routes) {\r\n\t\tconst uri = context.error ? '/error' : context.pathname;\r\n\t\tconst params = matchURI(route.path, uri);\r\n\t\tif (!params) continue;\r\n\t\tconst result = route.component(params);\r\n\t\tif (result) return result;\r\n\t}\r\n\tconst error = new Error('Not found');\r\n\terror.status = 404;\r\n\tthrow error;\r\n}\r\n\r\nexport default { resolve };","import React from 'react'\r\n\r\n\r\nimport styles from '../styles/index.scss'\r\n\r\nimport history from '../history'\r\nimport router from './routes.jsx'\r\n\r\nexport default class Router extends React.Component {\r\n  constructor(props){\r\n    super(props)\r\n\r\n    this.state = {\r\n      currentPath: history.location\r\n    }\r\n  }\r\n\r\n  render() {\r\n    var Component = router.resolve(window.location)\r\n    return (Component)\r\n  }\r\n\r\n  componentDidMount() {\r\n    history.listen((location) => {\r\n      this.setState({\r\n        currentPath: location\r\n      })\r\n    });\r\n  }\r\n}\r\n","/*\r\n    ./client/index.js\r\n    which is the webpack entry file\r\n*/\r\n\r\nimport React from 'react'\r\nimport { render } from 'react-dom'\r\n\r\nimport App from './components/App.jsx'\r\n\r\nrender(\r\n  <App />,\r\n  document.getElementById('root')\r\n)\r\n","// helper file\r\n\r\nimport axios from \"axios\";\r\nimport Parse from \"parse\";\r\n\r\nParse.initialize(\r\n  \"osxjLrTMW7cJ6r6IPOpDYXyuBzBRSzQTaNeza7O6\",\r\n  \"rijTlVRNfqPPV2X9MLnRAP1UDzQbz7UTRjfCOaQ6\"\r\n);\r\nParse.serverURL = 'https://pg-app-57gagyy9xq3pta5kvgpzs2dh6gv7w5.scalabl.cloud/1/';\r\n// Parse.initialize(\"napchart\");\r\n// Parse.serverURL = \"http://localhost:1337/1/\";\r\n\r\nconst Chart = Parse.Object.extend(\"Chart\");\r\n\r\nexport default {\r\n  save: (data, title, description, cb) => {\r\n    var chart = new Chart();\r\n\r\n    const results = Parse.Cloud.run(\"createChart\", {\r\n      chartid: \"123f5\",\r\n      title: title,\r\n      description: description,\r\n      chartData: data\r\n    })\r\n      .then(response => {\r\n        console.log(response);\r\n        var chartid = response.chartid;\r\n\r\n        cb(null, chartid);\r\n      })\r\n      .catch(hm => {\r\n        console.error(\"oh no!:\", hm);\r\n        cb(\"Oh no! There was an error with your request. Please try again\");\r\n      });\r\n  },\r\n\r\n  loadChart: async (loading, loadFinish, cb) => {\r\n    // first check if fetch is needed\r\n    var chartid = false;\r\n    if (window.location.pathname.length == 6) {\r\n      chartid = window.location.pathname.substring(1);\r\n    }\r\n\r\n    if (!chartid) {\r\n      console.log(\"no chartid, nothing to load\");\r\n      return cb({});\r\n    }\r\n\r\n    loading();\r\n\r\n    const query = new Parse.Query(Chart);\r\n    query.equalTo(\"chartid\", chartid);\r\n    const results = await query.find();\r\n    console.log(\"results: \", results);\r\n    const chart = results[0];\r\n    console.log();\r\n    const data = {\r\n      id: chartid,\r\n      metaInfo: {\r\n        title: chart.get(\"title\"),\r\n        description: chart.get(\"description\")\r\n      },\r\n      ...chart.get(\"chartData\")\r\n    };\r\n    loadFinish();\r\n\r\n    return cb(data);\r\n  },\r\n\r\n  sendFeedback: (feedback, cb) => {\r\n    axios\r\n      .post(\"/api/postFeedback\", {\r\n        data: JSON.stringify(feedback)\r\n      })\r\n      .then(response => {\r\n        console.log(response);\r\n        cb();\r\n      });\r\n  }\r\n};\r\n","import React from 'react'\r\nimport Napchart from 'napchart'\r\nimport classNames from 'classnames'\r\nimport uuid from 'uuid'\r\n\r\nexport default class Chart extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      napchart: false,\r\n      hasStartedSpinning: false,\r\n      ref: uuid.v4()\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initializeChart()\r\n  }\r\n\r\n  render() {\r\n    if (this.props.loading && !this.state.hasStartedSpinning && this.state.napchart) {\r\n      this.spinLoad()\r\n    }\r\n\r\n    var height = this.props.height\r\n    return (\r\n      <div className={\"logoContainer \" + this.props.className}>\r\n        <div className=\"canvasParent\" style={{ width: height + 'px' }}>\r\n          <canvas width={height} height={height} ref={this.state.ref}></canvas>\r\n        </div>\r\n        <div className=\"text\">\r\n          {this.props.logoText &&\r\n            <span style={{ fontSize: height / 2 }}\r\n              className={classNames(\"logoText\", { dark: this.props.whiteBG })}\r\n            >{this.props.logoText}</span>\r\n          }\r\n\r\n          {height > 120 &&\r\n            <span className={classNames(\"slogan\", { dark: this.props.whiteBG })}>\r\n              24 hour time-planner\r\n            </span>\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  initializeChart() {\r\n    var canvas = this.refs[this.state.ref]\r\n    var ctx = canvas.getContext('2d')\r\n\r\n    var elements = [{\r\n      \"end\": 320, \"start\": 30, \"lane\": 0, \"id\": 4082, \"text\": \"\", \"color\": \"red\", \"duration\": 240\r\n    }, {\r\n      \"end\": 680, \"start\": 390, \"lane\": 0, \"id\": 545, \"text\": \"\", \"color\": \"green\", \"duration\": 240\r\n    }, {\r\n      \"start\": 750, \"end\": 1040, \"lane\": 0, \"id\": 8540, \"text\": \"\", \"color\": \"brown\", \"duration\": 240\r\n    }, {\r\n      \"start\": 1110, \"end\": 1400, \"lane\": 0, \"id\": 9693, \"text\": \"\", \"color\": \"yellow\", \"duration\": 240\r\n    }]\r\n\r\n    if (this.props.white) {\r\n      elements = elements.map(e => ({\r\n        ...e,\r\n        color: 'white'\r\n      }))\r\n    }\r\n\r\n    var napchart = Napchart.init(ctx, {\r\n      elements: elements,\r\n      shape: 'miniCircle',\r\n      lanes: 1\r\n    }, {\r\n        text: false,\r\n        drawFace: false,\r\n        interaction: !this.props.noInteraction ? true : false\r\n      })\r\n\r\n    napchart.data.elements.forEach(element => {\r\n      element.initialStart = element.start\r\n      element.initialEnd = element.end\r\n    })\r\n\r\n    this.state.napchart = napchart\r\n  }\r\n\r\n  spinLoad = (callback) => {\r\n    this.setState({\r\n      hasStartedSpinning: true\r\n    })\r\n\r\n    var shouldIContinue = () => {\r\n      if (this.props.loading) {\r\n        this.continueSpin(shouldIContinue)\r\n      } else {\r\n        this.endSpin(() => {\r\n          this.setState({\r\n            hasStartedSpinning: false\r\n          })\r\n        })\r\n      }\r\n    }\r\n\r\n    this.startSpin(() => {\r\n      this.continueSpin(shouldIContinue)\r\n    })\r\n  }\r\n\r\n  startSpin = (callback) => {\r\n    this.spin(500, easingEffects.easeInSine, 290, 1440 / 4, callback)\r\n  }\r\n\r\n  continueSpin = (callback) => {\r\n    this.spin(250, easingEffects.linear, 1440 / 4, 1440 / 4, callback)\r\n  }\r\n\r\n  endSpin = (callback) => {\r\n    this.spin(500, easingEffects.easeOutSine, 1440 / 4, 290, callback)\r\n  }\r\n\r\n  spin(duration, easingEffect, animateFromDuration, animateToDuration, callback) {\r\n    var napchart = this.state.napchart\r\n\r\n    var start = Date.now()\r\n\r\n    function step() {\r\n      var now = Date.now()\r\n      var progress = Math.min((now - start) / duration, 1)\r\n      if (progress >= 1) {\r\n        return callback()\r\n      }\r\n      var progress = easingEffect(progress)\r\n\r\n\r\n      var newElements = napchart.data.elements.map(element => {\r\n        var distance = 1440\r\n\r\n        var sizeAnimate = 36 * progress\r\n        var thisDuration = animateFromDuration + (animateToDuration - animateFromDuration) * progress\r\n        // console.log(sizeAnimate)\r\n        var start = element.initialStart + distance * progress - sizeAnimate\r\n        var end = start + thisDuration\r\n        return {\r\n          ...element,\r\n          start,\r\n          end// + distance * progress + sizeAnimate\r\n        }\r\n      })\r\n      napchart.setElements(newElements)\r\n      if (progress < 1) {\r\n        // console.log(progress)\r\n        requestAnimationFrame(step)\r\n      }\r\n    }\r\n\r\n    step()\r\n  }\r\n\r\n}\r\n\r\nvar easingEffects = {\r\n  linear: function (t) {\r\n    return t\r\n  },\r\n  easeInQuad: function (t) {\r\n    return t * t\r\n  },\r\n  easeOutQuad: function (t) {\r\n    return -1 * t * (t - 2)\r\n  },\r\n  easeInOutQuad: function (t) {\r\n    if ((t /= 1 / 2) < 1) {\r\n      return 1 / 2 * t * t\r\n    }\r\n    return -1 / 2 * ((--t) * (t - 2) - 1)\r\n  },\r\n  easeInCubic: function (t) {\r\n    return t * t * t\r\n  },\r\n  easeOutCubic: function (t) {\r\n    return 1 * ((t = t / 1 - 1) * t * t + 1)\r\n  },\r\n  easeInOutCubic: function (t) {\r\n    if ((t /= 1 / 2) < 1) {\r\n      return 1 / 2 * t * t * t\r\n    }\r\n    return 1 / 2 * ((t -= 2) * t * t + 2)\r\n  },\r\n  easeInQuart: function (t) {\r\n    return t * t * t * t\r\n  },\r\n  easeOutQuart: function (t) {\r\n    return -1 * ((t = t / 1 - 1) * t * t * t - 1)\r\n  },\r\n  easeInOutQuart: function (t) {\r\n    if ((t /= 1 / 2) < 1) {\r\n      return 1 / 2 * t * t * t * t\r\n    }\r\n    return -1 / 2 * ((t -= 2) * t * t * t - 2)\r\n  },\r\n  easeInQuint: function (t) {\r\n    return 1 * (t /= 1) * t * t * t * t\r\n  },\r\n  easeOutQuint: function (t) {\r\n    return 1 * ((t = t / 1 - 1) * t * t * t * t + 1)\r\n  },\r\n  easeInOutQuint: function (t) {\r\n    if ((t /= 1 / 2) < 1) {\r\n      return 1 / 2 * t * t * t * t * t\r\n    }\r\n    return 1 / 2 * ((t -= 2) * t * t * t * t + 2)\r\n  },\r\n  easeInSine: function (t) {\r\n    return -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1\r\n  },\r\n  easeOutSine: function (t) {\r\n    return 1 * Math.sin(t / 1 * (Math.PI / 2))\r\n  },\r\n  easeInOutSine: function (t) {\r\n    return -1 / 2 * (Math.cos(Math.PI * t / 1) - 1)\r\n  },\r\n  easeInExpo: function (t) {\r\n    return (t === 0) ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1))\r\n  },\r\n  easeOutExpo: function (t) {\r\n    return (t === 1) ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1)\r\n  },\r\n  easeInOutExpo: function (t) {\r\n    if (t === 0) {\r\n      return 0\r\n    }\r\n    if (t === 1) {\r\n      return 1\r\n    }\r\n    if ((t /= 1 / 2) < 1) {\r\n      return 1 / 2 * Math.pow(2, 10 * (t - 1))\r\n    }\r\n    return 1 / 2 * (-Math.pow(2, -10 * --t) + 2)\r\n  },\r\n  easeInCirc: function (t) {\r\n    if (t >= 1) {\r\n      return t\r\n    }\r\n    return -1 * (Math.sqrt(1 - (t /= 1) * t) - 1)\r\n  },\r\n  easeOutCirc: function (t) {\r\n    return 1 * Math.sqrt(1 - (t = t / 1 - 1) * t)\r\n  },\r\n  easeInOutCirc: function (t) {\r\n    if ((t /= 1 / 2) < 1) {\r\n      return -1 / 2 * (Math.sqrt(1 - t * t) - 1)\r\n    }\r\n    return 1 / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1)\r\n  },\r\n  easeInElastic: function (t) {\r\n    var s = 1.70158\r\n    var p = 0\r\n    var a = 1\r\n    if (t === 0) {\r\n      return 0\r\n    }\r\n    if ((t /= 1) === 1) {\r\n      return 1\r\n    }\r\n    if (!p) {\r\n      p = 1 * 0.3\r\n    }\r\n    if (a < Math.abs(1)) {\r\n      a = 1\r\n      s = p / 4\r\n    } else {\r\n      s = p / (2 * Math.PI) * Math.asin(1 / a)\r\n    }\r\n    return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p))\r\n  },\r\n  easeOutElastic: function (t) {\r\n    var s = 1.70158\r\n    var p = 0\r\n    var a = 1\r\n    if (t === 0) {\r\n      return 0\r\n    }\r\n    if ((t /= 1) === 1) {\r\n      return 1\r\n    }\r\n    if (!p) {\r\n      p = 1 * 0.3\r\n    }\r\n    if (a < Math.abs(1)) {\r\n      a = 1\r\n      s = p / 4\r\n    } else {\r\n      s = p / (2 * Math.PI) * Math.asin(1 / a)\r\n    }\r\n    return a * Math.pow(2, -10 * t) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) + 1\r\n  },\r\n  easeInOutElastic: function (t) {\r\n    var s = 1.70158\r\n    var p = 0\r\n    var a = 1\r\n    if (t === 0) {\r\n      return 0\r\n    }\r\n    if ((t /= 1 / 2) === 2) {\r\n      return 1\r\n    }\r\n    if (!p) {\r\n      p = 1 * (0.3 * 1.5)\r\n    }\r\n    if (a < Math.abs(1)) {\r\n      a = 1\r\n      s = p / 4\r\n    } else {\r\n      s = p / (2 * Math.PI) * Math.asin(1 / a)\r\n    }\r\n    if (t < 1) {\r\n      return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p))\r\n    }\r\n    return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) * 0.5 + 1\r\n  },\r\n  easeInBack: function (t) {\r\n    var s = 1.70158\r\n    return 1 * (t /= 1) * t * ((s + 1) * t - s)\r\n  },\r\n  easeOutBack: function (t) {\r\n    var s = 1.70158\r\n    return 1 * ((t = t / 1 - 1) * t * ((s + 1) * t + s) + 1)\r\n  },\r\n  easeInOutBack: function (t) {\r\n    var s = 1.70158\r\n    if ((t /= 1 / 2) < 1) {\r\n      return 1 / 2 * (t * t * (((s *= (1.525)) + 1) * t - s))\r\n    }\r\n    return 1 / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2)\r\n  },\r\n  easeInBounce: function (t) {\r\n    return 1 - easingEffects.easeOutBounce(1 - t)\r\n  },\r\n  easeOutBounce: function (t) {\r\n    if ((t /= 1) < (1 / 2.75)) {\r\n      return 1 * (7.5625 * t * t)\r\n    } else if (t < (2 / 2.75)) {\r\n      return 1 * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75)\r\n    } else if (t < (2.5 / 2.75)) {\r\n      return 1 * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375)\r\n    }\r\n    return 1 * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375)\r\n  },\r\n  easeInOutBounce: function (t) {\r\n    if (t < 1 / 2) {\r\n      return easingEffects.easeInBounce(t * 2) * 0.5\r\n    }\r\n    return easingEffects.easeOutBounce(t * 2 - 1) * 0.5 + 1 * 0.5\r\n  }\r\n}","// helper file\r\n\r\nimport {createBrowserHistory} from 'history';\r\n\r\nexport default createBrowserHistory();"],"sourceRoot":""}